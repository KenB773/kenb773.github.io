<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Azure Sentinel - Home SOC</title>
  <link rel="stylesheet" href="/assets/css/style.css?v=64449ae24f2bcfd363b0ed346a21f75421f936cb" />
</head>
<body>
  <main class="container">
    <h1>Azure VM with Sentinel – Personal SIEM / Home SOC</h1>

    <p>After some hands-on work through various learning paths, virtual internships and to satisfy my own insatiable curiosity, I built out my own test SIEM with a custom rule, set to detect successful logins via RDP (which was intentionally left open for testing purposes). Thanks to the free $200 credit for new Azure accounts, this project even worked out to be the best kind of cheap... Free!</p>

    <h2>Creating the VM</h2>
    <p>The first step after getting started on Azure was, of course, to create a relatively simple Windows 10 Pro VM... </p>
    <img src="Azure VM Creation.png" alt="Azure VM Creation" />

    <h2>Sentinel / Log Analytics Workspace Setup</h2>
    <p>Next up was setting up Sentinel itself. I continued with my apt naming trend.</p>
    <img src="Azure Sentinel Creation.png" alt="Sentinel Creation" />

    <p>After this, I installed the Windows Security Events Data Connector via the Content Hub...</p>
    <img src="Azure WinSecEvents AMA.png" alt="Sentinel WinAMA" />
    <img src="Azure Data Collection Rule AMA.png" alt="Sentinel DCR" />
    <img src="Azure Log Received DCR.png" alt="Logs Collected" />

    <p>Now that we’re receiving logs from our VM, we want to create a useful detection rule...</p>
    <img src="Rule Logic Full 2.png" alt="Rule Logic" />
    <p>We categorize it under <a href="https://attack.mitre.org/tactics/TA0001/" target="_blank">TA0001 - Initial Access</a>.</p>

    <h2>Testing it Out</h2>
    <p>I RDP into the VM and sign in with the previously created administrator credentials...</p>
    <img src="Azure Incident Logged.png" alt="Incident Logged" />

    <p>A quick switch from 'Allow' to 'Deny' in the port rules should do the trick.</p>
    <img src="Azure RDP 3389 Deny.png" alt="RDP Deny" />

    <p>With that, we wrap up this basic but very useful experiment! This is just the tip of the iceberg, and I'll definitely be back to do more with this setup in the future. Thanks for reading!</p>
  </main>
</body>
</html>
